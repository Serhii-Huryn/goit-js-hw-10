{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst inputCalendar = document.querySelector('#datetime-picker');\n\nstartBtn.disabled = true;\n\nlet date;\nlet deltaTime;\n\nflatpickr('#datetime-picker', {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0] > Date.now()) {\n            date = selectedDates[0];\n            startBtn.disabled = false;\n            startBtn.classList.add('start-active');\n        } else {\n            iziToast.show({\n                title: 'Error',\n                message: 'Please choose a date in the future',\n                backgroundColor: '#B51B1B',\n                iconUrl: './img/error.svg',\n                timeout: '3000',\n            });\n            startBtn.disabled = true;\n            startBtn.classList.remove('start-active');\n        }\n\n        if (date) {\n            deltaTime = date.getTime() - Date.now();\n        }\n    },\n});\n\nstartBtn.addEventListener('click', handleCountdown);\n\nfunction handleCountdown() {\n    inputCalendar.style.cursor = 'default';\n    startBtn.classList.remove('start-active');\n\n    const days = document.querySelector('.value[data-days]');\n    const hours = document.querySelector('.value[data-hours]');\n    const minutes = document.querySelector('.value[data-minutes]');\n    const seconds = document.querySelector('.value[data-seconds]');\n\n    const countdownInterval = setInterval(() => {\n        if (deltaTime > 997) {\n            startBtn.disabled = true;\n            inputCalendar.disabled = true;\n\n            deltaTime = date.getTime() - Date.now();\n            const currentValue = convertMs(deltaTime);\n\n            days.innerHTML = `${String(currentValue.days).padStart(2, '0')}`;\n            hours.innerHTML = `${String(currentValue.hours).padStart(2, '0')}`;\n            minutes.innerHTML = `${String(currentValue.minutes).padStart(2, '0')}`;\n            seconds.innerHTML = `${String(currentValue.seconds).padStart(2, '0')}`;\n        } else {\n            inputCalendar.disabled = false;\n            inputCalendar.style.cursor = 'pointer';\n\n            clearInterval(countdownInterval);\n            return;\n        }\n    }, 1000);\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}"],"names":["startBtn","inputCalendar","date","deltaTime","flatpickr","selectedDates","iziToast","handleCountdown","days","hours","minutes","seconds","countdownInterval","currentValue","convertMs","ms"],"mappings":"2GAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAgB,SAAS,cAAc,kBAAkB,EAE/DD,EAAS,SAAW,GAEpB,IAAIE,EACAC,EAEJC,EAAU,mBAAoB,CAC1B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,CAAC,EAAI,KAAK,IAAG,GAC3BH,EAAOG,EAAc,CAAC,EACtBL,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,cAAc,IAErCM,EAAS,KAAK,CACV,MAAO,QACP,QAAS,qCACT,gBAAiB,UACjB,QAAS,kBACT,QAAS,MACzB,CAAa,EACDN,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,cAAc,GAGxCE,IACAC,EAAYD,EAAK,QAAS,EAAG,KAAK,IAAG,EAE5C,CACL,CAAC,EAEDF,EAAS,iBAAiB,QAASO,CAAe,EAElD,SAASA,GAAkB,CACvBN,EAAc,MAAM,OAAS,UAC7BD,EAAS,UAAU,OAAO,cAAc,EAExC,MAAMQ,EAAO,SAAS,cAAc,mBAAmB,EACjDC,EAAQ,SAAS,cAAc,oBAAoB,EACnDC,EAAU,SAAS,cAAc,sBAAsB,EACvDC,EAAU,SAAS,cAAc,sBAAsB,EAEvDC,EAAoB,YAAY,IAAM,CACxC,GAAIT,EAAY,IAAK,CACjBH,EAAS,SAAW,GACpBC,EAAc,SAAW,GAEzBE,EAAYD,EAAK,QAAS,EAAG,KAAK,IAAG,EACrC,MAAMW,EAAeC,EAAUX,CAAS,EAExCK,EAAK,UAAY,GAAG,OAAOK,EAAa,IAAI,EAAE,SAAS,EAAG,GAAG,CAAC,GAC9DJ,EAAM,UAAY,GAAG,OAAOI,EAAa,KAAK,EAAE,SAAS,EAAG,GAAG,CAAC,GAChEH,EAAQ,UAAY,GAAG,OAAOG,EAAa,OAAO,EAAE,SAAS,EAAG,GAAG,CAAC,GACpEF,EAAQ,UAAY,GAAG,OAAOE,EAAa,OAAO,EAAE,SAAS,EAAG,GAAG,CAAC,EAChF,KAAe,CACHZ,EAAc,SAAW,GACzBA,EAAc,MAAM,OAAS,UAE7B,cAAcW,CAAiB,EAC/B,MACH,CACJ,EAAE,GAAI,CACX,CAEA,SAASE,EAAUC,EAAI,CAQnB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}